<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaterThePlant | Home</title>
    <!-- Favicon Links -->
    <link rel="icon" type="image/x-icon" href="img/general/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="img/general/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/general/favicon-16x16.png">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Custom Styles -->
    <style>
        /* Body Styles */
        body {
            background-image: url('img/general/space.jpeg');
            background-size: cover;
            background-position: center;
            transition: background-color 0.3s ease, color 0.3s ease;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding-top: 70px; /* Navbar Padding */
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #050111;
            color: #ffffff;
        }

        /* Navbar Dark Mode */
        .navbar.dark-mode {
            background-color: #050117 !important;
            color: #ffffff !important;
        }
        .navbar.dark-mode .nav-link,
        .navbar.dark-mode .navbar-brand {
            color: #ffffff !important;
        }

        /* Icon Buttons */
        .icon-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid #6c757d;
            background-color: #f8f9fa;
            color: #6c757d;
            font-size: 1.2rem;
            margin-right: 8px;
            transition: background-color 0.3s, color 0.3s;
        }
        .icon-button:hover {
            background-color: rgba(0, 0, 0, 0.1);
            color: #343a40;
        }

        /* Content Section */
        .content-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 60px 30px;
            border-radius: 12px;
            margin-top: 120px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: background 0.3s, color 0.3s;
        }
        body.dark-mode .content-section {
            background: rgba(50, 50, 50, 0.9);
            color: #fff;
        }

        .content-section h2 {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .content-section p {
            font-size: 1.2rem;
            line-height: 1.8;
            text-align: center;
            margin-bottom: 40px;
        }

        /* Feature List */
        .feature-list {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f9fa;
            border: none;
            padding: 30px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, background-color 0.3s, color 0.3s;
            width: 100%;
            max-width: 300px;
            text-align: center;
        }
        .feature-item:hover {
            transform: translateY(-10px);
            background-color: #e2e6ea;
        }
        body.dark-mode .feature-item {
            background-color: #555;
            color: #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        body.dark-mode .feature-item:hover {
            background-color: #666;
        }

        .feature-item h4 {
            font-size: 1.8rem;
            margin-bottom: 15px;
        }

        .feature-item p {
            font-size: 1rem;
            margin-bottom: 25px;
        }

        .feature-item .btn {
            width: 120px;
        }

        /* Button Container */
        .button-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }

        /* Widgets */
        .widget {
            position: fixed;
            width: 320px;
            max-width: 90%;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            padding: 20px;
            cursor: grab;
            display: none;
            transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;
            z-index: 1000;
            box-sizing: border-box;
        }
        .widget.dark-mode {
            background-color: #444;
            color: #fff;
            border-color: #666;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .widget h4 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-align: center;
        }

        .widget p {
            font-size: 1rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .widget .button-container {
            text-align: center;
            margin-top: 20px;
        }

        .widget .btn {
            width: 100px;
        }

        /* Pomodoro Display */
        #pomodoroDisplay {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 15px;
        }

        /* To-Do List & Notes */
        #todoList, #showNotes {
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            border-radius: 5px;
            background-color: #fff;
            margin-bottom: 15px;
        }
        body.dark-mode #todoList, body.dark-mode #showNotes {
            background-color: #333;
            color: #fff;
            border-color: #555;
        }

        .draggable-item {
            background: #f1f1f1;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 8px;
            cursor: grab;
            word-wrap: break-word;
            transition: background-color 0.3s, color 0.3s;
        }
        body.dark-mode .draggable-item {
            background: #555;
            border-color: #666;
            color: #fff;
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        /* Drag Over Effect */
        .drag-over {
            border: 2px dashed #317773;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .content-section {
                padding: 40px 20px;
            }
            .content-section h2 {
                font-size: 2.5rem;
            }
            .content-section p {
                font-size: 1rem;
            }
            .feature-item {
                max-width: 100%;
            }

            /* Center Widgets on Mobile */
            .widget {
                width: 95%;
                left: 50% !important;
                top: 50% !important;
                transform: translate(-50%, -50%) !important;
                cursor: default; /* Disable grabbing cursor on mobile */
            }

            /* Optional: Disable Draggable on Mobile for Better UX */
            .widget {
            /* Additional styles can be added here if needed */
            }
        }
    </style>
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
    <a class="navbar-brand" href="index.html">
        <img id="logo" src="img/general/logoblack.png" alt="Logo" height="50">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="notes.html">Notes</a></li>
            <li class="nav-item"><a class="nav-link" href="pomodoro.html">Pomodoro</a></li>
            <li class="nav-item"><a class="nav-link" href="todos.html">To-Do List</a></li>
        </ul>
        <button class="icon-button" id="colorToggle" aria-label="Change Color" onclick="toggleDarkMode()">üé®</button>
        <button class="icon-button" id="languageToggle" aria-label="Select Language">üåê</button>
        <div class="dropdown">
            <button class="icon-button" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">‚ãØ
            </button>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                <!-- Add dropdown items here if needed -->
            </div>
        </div>
    </div>
</nav>

<!-- Main Content Area -->
<div class="container flex-grow-1 d-flex align-items-center">
    <div class="content-section w-100">
        <h2>Welcome to WaterThePlant</h2>
        <p>WaterThePlant is your all-in-one productivity companion. Keep track of tasks, record notes, and focus with the Pomodoro technique‚Äîall from one place. For more detailed insights and methods, visit the dedicated pages for each feature.</p>

        <div class="feature-list">
            <!-- Pomodoro Section -->
            <div class="feature-item">
                <h4>Pomodoro Timer</h4>
                <p>Focus in short sprints and stay productive.</p>
                <div class="button-container">
                    <button class="btn btn-primary" id="pomodoroToggleBtn" onclick="toggleWidget('widget1', this)">Try Basic</button>
                </div>
            </div>

            <!-- To-Do List Section -->
            <div class="feature-item">
                <h4>To-Do List</h4>
                <p>Organize tasks and never miss a deadline.</p>
                <div class="button-container">
                    <button class="btn btn-primary" id="todoToggleBtn" onclick="toggleWidget('widget2', this)">Try Basic</button>
                </div>
            </div>

            <!-- Notes Section -->
            <div class="feature-item">
                <h4>Notes</h4>
                <p>Capture ideas and important info in one place.</p>
                <div class="button-container">
                    <button class="btn btn-primary" id="notesToggleBtn" onclick="toggleWidget('widget3', this)">Try Basic</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Pomodoro Widget -->
<div class="widget" id="widget1" style="top: 150px; left: 50px;">
    <h4>Pomodoro</h4>
    <p>For detailed tips and advanced techniques, visit the Pomodoro Timer page.</p>
    <div id="pomodoroDisplay">25:00</div>
    <div class="button-container">
        <button class="btn btn-success mr-2" id="pomodoroStartBtn">Start</button>
        <button class="btn btn-danger" id="pomodoroStopBtn">Stop</button>
    </div>
    <p id="pomodoroMessage" class="mt-3 text-success font-weight-bold"></p>
</div>

<!-- To-Do Widget -->
<div class="widget" id="widget2" style="top: 150px; left: 400px;">
    <h4>To-Do List</h4>

    <div class="input-group mb-3">
        <input type="text" id="todoInput" class="form-control" placeholder="Add a task... (max 150 chars)" aria-label="Add a task">
        <div class="input-group-append">
            <button class="btn btn-primary" id="addTodoBtn" type="button">Add</button>
        </div>
    </div>
    <div id="todoList" class="mb-3"></div>
</div>

<!-- Notes Widget -->
<div class="widget" id="widget3" style="top: 150px; left: 750px;">
    <h4>Notes</h4>

    <div class="form-group">
        <input id="input-title" type="text" placeholder="Title (max 150 chars total)" class="form-control" aria-label="Note Title">
    </div>
    <div class="form-group">
        <textarea id="input-text" placeholder="Text (Title+Text ‚â§ 150 chars)" class="form-control" rows="3" aria-label="Note Text"></textarea>
    </div>
    <div class="button-container mb-3">
        <button id="addNoteBtn" class="btn btn-primary">Add</button>
    </div>
    <div id="showNotes"></div>
</div>

<!-- Bootstrap and jQuery Scripts -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Custom JavaScript -->
<script>
    // Dark Mode Toggle
    function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        document.querySelector('.navbar').classList.toggle('dark-mode');
        document.querySelectorAll('.widget').forEach(widget => widget.classList.toggle('dark-mode'));

        const logo = document.getElementById('logo');
        if (document.body.classList.contains('dark-mode')) {
            logo.src = 'img/general/logowhite.png';
        } else {
            logo.src = 'img/general/logoblack.png';
        }
    }

    // Initialize widget states
    function initializeWidgetStates() {
        if (!sessionStorage.getItem('widget1Open')) {
            sessionStorage.setItem('widget1Open', 'false');
        }
        if (!sessionStorage.getItem('widget2Open')) {
            sessionStorage.setItem('widget2Open', 'false');
        }
        if (!sessionStorage.getItem('widget3Open')) {
            sessionStorage.setItem('widget3Open', 'false');
        }
    }

    initializeWidgetStates();

    function toggleWidget(widgetId, button) {
        const widget = document.getElementById(widgetId);
        let stateKey = widgetId + 'Open';
        let isOpen = sessionStorage.getItem(stateKey) === 'true';

        if (!isOpen) {
            // Open widget
            widget.style.display = 'block';
            button.textContent = 'Close';
            sessionStorage.setItem(stateKey, 'true');
        } else {
            // Close widget
            widget.style.display = 'none';
            button.textContent = 'Try Basic';
            sessionStorage.setItem(stateKey, 'false');
        }
    }

    function restoreWidgetStates() {
        // Restore widget1
        const widget1State = sessionStorage.getItem('widget1Open');
        const widget1 = document.getElementById('widget1');
        const pomodoroToggleBtn = document.getElementById('pomodoroToggleBtn');
        if (widget1State === 'true') {
            widget1.style.display = 'block';
            pomodoroToggleBtn.textContent = 'Close';
        } else {
            widget1.style.display = 'none';
            pomodoroToggleBtn.textContent = 'Try Basic';
        }

        // Restore widget2
        const widget2State = sessionStorage.getItem('widget2Open');
        const widget2 = document.getElementById('widget2');
        const todoToggleBtn = document.getElementById('todoToggleBtn');
        if (widget2State === 'true') {
            widget2.style.display = 'block';
            todoToggleBtn.textContent = 'Close';
        } else {
            widget2.style.display = 'none';
            todoToggleBtn.textContent = 'Try Basic';
        }

        // Restore widget3
        const widget3State = sessionStorage.getItem('widget3Open');
        const widget3 = document.getElementById('widget3');
        const notesToggleBtn = document.getElementById('notesToggleBtn');
        if (widget3State === 'true') {
            widget3.style.display = 'block';
            notesToggleBtn.textContent = 'Close';
        } else {
            widget3.style.display = 'none';
            notesToggleBtn.textContent = 'Try Basic';
        }
    }

    function makeDraggable(widgetId) {
        const widget = document.getElementById(widgetId);
        let offsetX = 0, offsetY = 0;
        let isDragging = false;

        // Function to check if the screen is larger than mobile
        function isDesktop() {
            return window.innerWidth > 768;
        }

        widget.addEventListener('mousedown', (e) => {
            if (!isDesktop()) return; // Disable dragging on mobile
            if (['INPUT','TEXTAREA','BUTTON'].includes(e.target.tagName)) {
                return;
            }
            isDragging = true;
            offsetX = e.clientX - widget.offsetLeft;
            offsetY = e.clientY - widget.offsetTop;
            widget.style.cursor = 'grabbing';
            e.preventDefault();
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging && isDesktop()) {
                widget.style.left = `${e.clientX - offsetX}px`;
                widget.style.top = `${e.clientY - offsetY}px`;
            }
        });

        document.addEventListener('mouseup', () => {
            if (isDesktop()) {
                isDragging = false;
                widget.style.cursor = 'grab';
            }
        });

        // Update draggable state on window resize
        window.addEventListener('resize', () => {
            if (!isDesktop()) {
                isDragging = false;
                widget.style.cursor = 'default';
            }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        makeDraggable('widget1');
        makeDraggable('widget2');
        makeDraggable('widget3');
        restoreWidgetStates();
    });

    // Pomodoro Logic
    let pomodoroInterval;
    let pomodoroTime = 25 * 60;
    const pomodoroDisplay = document.getElementById('pomodoroDisplay');
    const pomodoroMessage = document.getElementById('pomodoroMessage');

    const pomodoroStartBtn = document.getElementById('pomodoroStartBtn');
    const pomodoroStopBtn = document.getElementById('pomodoroStopBtn');
    pomodoroStartBtn.addEventListener('click', startPomodoro);
    pomodoroStopBtn.addEventListener('click', stopPomodoro);

    function startPomodoro() {
        stopPomodoro();
        pomodoroMessage.textContent = "";
        pomodoroInterval = setInterval(() => {
            if (pomodoroTime > 0) {
                pomodoroTime--;
                updatePomodoroDisplay();
            } else {
                clearInterval(pomodoroInterval);
                pomodoroMessage.textContent = "Time's Up!";
            }
        }, 1000);
    }

    function stopPomodoro() {
        clearInterval(pomodoroInterval);
        pomodoroTime = 25 * 60;
        updatePomodoroDisplay();
    }

    function updatePomodoroDisplay() {
        const minutes = Math.floor(pomodoroTime / 60).toString().padStart(2, '0');
        const seconds = (pomodoroTime % 60).toString().padStart(2, '0');
        pomodoroDisplay.textContent = `${minutes}:${seconds}`;
    }

    // Initialize To-Do Storage
    function initializeTodoStorage() {
        if (!sessionStorage.getItem('todos')) {
            sessionStorage.setItem('todos', JSON.stringify([]));
        }
    }
    initializeTodoStorage();

    const todoList = document.getElementById('todoList');
    let todoItems = JSON.parse(sessionStorage.getItem('todos'));

    function displayTodoList() {
        todoList.innerHTML = "";
        todoItems.forEach((item, index) => {
            const todoDiv = document.createElement('div');
            todoDiv.className = 'draggable-item d-flex justify-content-between align-items-center';
            todoDiv.textContent = item.text;

            const delBtn = document.createElement('button');
            delBtn.className = 'btn btn-danger btn-sm ml-2';
            delBtn.textContent = "‚úï";
            delBtn.setAttribute('aria-label', 'Delete Task');
            delBtn.onclick = () => { deleteTodo(index); };
            todoDiv.appendChild(delBtn);

            todoList.appendChild(todoDiv);
        });
    }
    displayTodoList();

    const addTodoBtn = document.getElementById('addTodoBtn');
    addTodoBtn.addEventListener('click', addTodo);

    function addTodo() {
        const todoInput = document.getElementById('todoInput');
        const text = todoInput.value.trim();
        if (!text) return;

        if (text.length > 150) {
            alert("To-Do item cannot exceed 150 characters.");
            return;
        }

        todoItems.push({ text: text });
        sessionStorage.setItem('todos', JSON.stringify(todoItems));
        todoInput.value = "";
        displayTodoList();
    }

    function deleteTodo(index) {
        todoItems.splice(index, 1);
        sessionStorage.setItem('todos', JSON.stringify(todoItems));
        displayTodoList();
    }

    // Initialize Notes Storage
    function initializeNotesStorage() {
        if (!sessionStorage.getItem('notes')) {
            sessionStorage.setItem('notes', JSON.stringify([]));
        }
    }

    initializeNotesStorage();
    const showNotes = document.getElementById('showNotes');
    let notes = JSON.parse(sessionStorage.getItem('notes'));

    function displayNotesList() {
        showNotes.innerHTML = "";
        notes.forEach((note, index) => {
            const noteDiv = document.createElement('div');
            noteDiv.className = 'draggable-item';

            const header = document.createElement('div');
            header.className = 'note-header';

            const titleEl = document.createElement('strong');
            titleEl.textContent = note.title;
            header.appendChild(titleEl);

            const delBtn = document.createElement('button');
            delBtn.textContent = "‚úï";
            delBtn.className = 'btn btn-danger btn-sm';
            delBtn.setAttribute('aria-label', 'Delete Note');
            delBtn.onclick = () => { deleteNote(index); };
            header.appendChild(delBtn);

            noteDiv.appendChild(header);

            const textEl = document.createElement('p');
            textEl.textContent = note.text;
            noteDiv.appendChild(textEl);

            showNotes.appendChild(noteDiv);
        });
    }
    displayNotesList();

    const addNoteBtn = document.getElementById('addNoteBtn');
    addNoteBtn.addEventListener('click', addNoteOnClick);

    function addNoteOnClick() {
        const titleInput = document.getElementById('input-title');
        const textInput = document.getElementById('input-text');
        const title = titleInput.value.trim();
        const text = textInput.value.trim();

        if (!title || !text) {
            alert("Please fill out both fields.");
            return;
        }

        let combined = (title + " " + text).trim();
        if (combined.length > 150) {
            alert("Note cannot exceed 150 characters in total.");
            return;
        }

        notes.push({ title, text });
        sessionStorage.setItem('notes', JSON.stringify(notes));
        titleInput.value = "";
        textInput.value = "";
        displayNotesList();
    }

    function deleteNote(index) {
        notes.splice(index, 1);
        sessionStorage.setItem('notes', JSON.stringify(notes));
        displayNotesList();
    }
</script>
</body>
</html>
